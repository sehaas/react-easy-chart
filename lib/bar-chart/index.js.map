{"version":3,"sources":["../../modules/bar-chart/index.js"],"names":["dateParser","colorScale","schemeCategory20","domain","BarChart","data","PropTypes","array","isRequired","lineData","width","number","height","margin","object","mouseOverHandler","func","mouseOutHandler","mouseMoveHandler","clickHandler","interpolate","string","style","colorBars","bool","axes","grid","axisLabels","shape","x","y","xType","yType","y2Type","xDomainRange","yDomainRange","datePattern","tickTimeDisplayFormat","yAxisOrientRight","barWidth","xTickNumber","yTickNumber","props","uid","ref","refs","barChart","axesType","domainRange","type","length","dataIndex","barPadding","parseDate","v","axis","map","d","range","padding","Array","isArray","i","color","m","w","h","node","ReactFauxDOM","Element","setAttribute","left","right","top","bottom","append","attr","root","label","tickFormat","tickSize","tickPadding","ticks","group","call","text","y2","createDomainRangeGenerator","calculateDate","calculateFill","defineColor","calculateX","calculateY","calculateW","bandwidth","calculateH","mouseover","lastEvent","mouseout","mousemove","click","selectAll","enter","on","exit","remove","yValue","xValue","linePath","curve","datum","scope","axisStyles","rules","defaultStyles","datePatternParser","hasLineData","createSvgNode","createSvgRoot","p","calculateChartParameters","createXAxis","createYAxis","createYAxis2","createBarChart","createLinePath","className","createStyle","toReact","PureComponent"],"mappings":"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","file":"index.js","sourcesContent":["import React, { PureComponent } from 'react';\nimport { scaleBand as band, scaleLinear as linear } from 'd3-scale';\nimport {\n  event as lastEvent,\n  select,\n  axisBottom,\n  axisLeft,\n  axisRight,\n  scaleTime,\n  timeFormat,\n  scaleOrdinal,\n  schemeCategory20,\n  range,\n  line,\n  max\n} from 'd3';\nimport {\n  createUniqueID,\n  reduce,\n  calculateMargin,\n  calculateDomainRange,\n  defaultStyles,\n  getAxisStyles,\n  createValueGenerator,\n  createCircularTicks\n} from '../shared';\nimport interpolateLine from '../interpolate';\nimport { extent } from 'd3-array';\nimport { timeParse as parse } from 'd3-time-format';\nimport ReactFauxDOM from 'react-faux-dom';\nimport PropTypes from 'prop-types';\nimport { Style } from 'radium';\nimport merge from 'lodash.merge';\n\nconst dateParser = {};\n\nconst colorScale = scaleOrdinal(schemeCategory20).domain(range(0, 20));\n\nexport default class BarChart extends PureComponent {\n\n  static get propTypes() {\n    return {\n      data: PropTypes.array.isRequired,\n      lineData: PropTypes.array,\n      width: PropTypes.number,\n      height: PropTypes.number,\n      margin: PropTypes.object,\n      mouseOverHandler: PropTypes.func,\n      mouseOutHandler: PropTypes.func,\n      mouseMoveHandler: PropTypes.func,\n      clickHandler: PropTypes.func,\n      interpolate: PropTypes.string,\n      style: PropTypes.object,\n      colorBars: PropTypes.bool,\n      axes: PropTypes.bool,\n      grid: PropTypes.bool,\n      axisLabels: PropTypes.shape({\n        x: PropTypes.string,\n        y: PropTypes.string\n      }),\n      xType: PropTypes.string,\n      yType: PropTypes.string,\n      y2Type: PropTypes.string,\n      xDomainRange: PropTypes.array,\n      yDomainRange: PropTypes.array,\n      datePattern: PropTypes.string,\n      tickTimeDisplayFormat: PropTypes.string,\n      yAxisOrientRight: PropTypes.bool,\n      barWidth: PropTypes.number,\n      xTickNumber: PropTypes.number,\n      yTickNumber: PropTypes.number\n    };\n  }\n\n  static get defaultProps() {\n    return {\n      lineData: [],\n      width: 400,\n      height: 200,\n      barWidth: 10,\n      axes: false,\n      xType: 'text',\n      yType: 'linear',\n      y2Type: 'linear',\n      interpolate: 'linear',\n      mouseOverHandler: () => {},\n      mouseOutHandler: () => {},\n      mouseMoveHandler: () => {},\n      clickHandler: () => {},\n      datePattern: '%d-%b-%y',\n      axisLabels: {\n        x: '',\n        y: ''\n      }\n    };\n  }\n\n  constructor(props) {\n    super(props);\n    this.uid = createUniqueID(props);\n  }\n\n  componentDidMount() {\n    const ref = this.refs.barChart;\n    createCircularTicks(ref);\n  }\n\n  componentDidUpdate() {\n    const ref = this.refs.barChart;\n    createCircularTicks(ref);\n  }\n\n  createDomainRangeGenerator(axesType, domainRange, data, type, length) {\n    const dataIndex = axesType === 'x' ? 'x' : 'y';\n    const barPadding = (length / data.length) > 40 ? 0.02 : 0.04;\n    const parseDate = (v) => this.parseDate(v);\n    let axis;\n    switch (type) {\n      case 'text':\n        axis = band();\n        axis\n          .domain(data.map((d) => d[dataIndex]))\n          .range([0, length])\n          .padding(barPadding);\n        break;\n      case 'linear':\n        axis = linear();\n        axis\n          .domain(\n            Array.isArray(domainRange)\n              ? domainRange // calculateDomainRange(domainRange, type, parseDate)\n              : [0, max(data, (d) => d[dataIndex])])\n          .range(\n            (axesType === 'x')\n              ? [0, length]\n              : [length, 0]\n          );\n        break;\n      case 'time':\n        axis = scaleTime();\n        axis\n          .domain(\n            Array.isArray(domainRange)\n              ? calculateDomainRange(domainRange, type, parseDate)\n              : extent(data, (d) => parseDate(d[dataIndex])))\n          .range(\n            (axesType === 'x')\n              ? [0, length]\n              : [length, 0]);\n        break;\n      default:\n        break;\n    }\n    return axis;\n  }\n\n  defineColor(i, d, colorBars) {\n    if (d.color) return d.color;\n    if (colorBars) return colorScale(i);\n    return null;\n  }\n\n  createSvgNode({ m, w, h }) {\n    const node = new ReactFauxDOM.Element('svg');\n    node.setAttribute('width', w + m.left + m.right);\n    node.setAttribute('height', h + m.top + m.bottom);\n    return node;\n  }\n\n  createSvgRoot({ node, m }) {\n    return select(node)\n      .append('g')\n      .attr('transform', `translate(${m.left}, ${m.top})`);\n  }\n\n  createXAxis({ root, m, w, h, x }) {\n    const {\n      axisLabels: { x: label },\n      xType,\n      tickTimeDisplayFormat,\n      xTickNumber,\n      yAxisOrientRight\n    } = this.props;\n\n    const axis = axisBottom(x);\n\n    if (xType === 'time' && tickTimeDisplayFormat) {\n      axis\n        .tickFormat(timeFormat(tickTimeDisplayFormat));\n    }\n\n    axis\n      .tickSize(0)\n      .tickPadding(15);\n\n    if (xTickNumber) {\n      axis\n        .ticks(xTickNumber);\n    }\n\n    const group = root\n      .append('g')\n      .attr('class', 'x axis')\n      .attr('transform', `translate(0, ${h})`);\n\n    group\n      .call(axis);\n\n    if (label) {\n      group\n        .append('text')\n        .attr('class', 'label')\n        .attr('x',\n          (yAxisOrientRight)\n            ? 0\n            : w)\n        .attr('y', m.bottom - 10)\n        .style('text-anchor',\n          (yAxisOrientRight)\n            ? 'start'\n            : 'end')\n        .text(label);\n    }\n  }\n\n  createYAxis({ root, m, w, y }) {\n    const {\n      axisLabels: { y: label },\n      yTickNumber,\n      yAxisOrientRight,\n      grid\n    } = this.props;\n\n    const axis = yAxisOrientRight ? axisRight(y) : axisLeft(y);\n\n    if (yTickNumber) {\n      axis\n        .ticks(yTickNumber);\n    }\n\n    if (grid) {\n      axis\n        .tickSize(-w, 6)\n        .tickPadding(12);\n    } else {\n      axis\n        .tickPadding(10);\n    }\n\n    const group = root\n      .append('g')\n      .attr('class', 'y axis');\n\n    group\n      .call(axis);\n\n    if (label) {\n      group\n        .attr('transform',\n          (yAxisOrientRight)\n            ? `translate(${w}, 0)`\n            : 'translate(0, 0)')\n        .append('text')\n        .attr('class', 'label')\n        .attr('transform', 'rotate(-90)')\n        .attr('x', 0)\n        .attr('y',\n          (yAxisOrientRight)\n            ? -20 + m.right\n            : 5 - m.left)\n        .attr('dy', '.9em')\n        .style('text-anchor', 'end')\n        .text(label);\n    }\n  }\n\n  createYAxis2({ root, m, w, h }) {\n    const {\n      lineData,\n      axisLabels: { y2: label },\n      y2Type,\n      yTickNumber,\n      yAxisOrientRight,\n      grid,\n      yDomainRange\n    } = this.props;\n\n    const y = this.createDomainRangeGenerator('y', yDomainRange, lineData, y2Type, h);\n\n    const axis = yAxisOrientRight ? axisRight(y) : axisLeft(y);\n\n    if (yTickNumber) {\n      axis\n        .ticks(yTickNumber);\n    }\n\n    if (grid) {\n      axis\n        .tickSize(-w, 6)\n        .tickPadding(12);\n    } else {\n      axis\n        .tickPadding(10);\n    }\n\n    const group = root\n      .append('g')\n      .attr('class', 'y axis');\n\n    group\n      .call(axis);\n\n    if (label) {\n      group\n        .attr('transform',\n          (yAxisOrientRight)\n            ? 'translate(0, 0)'\n            : `translate(${w}, 0)`)\n        .append('text')\n        .attr('class', 'label')\n        .attr('transform', 'rotate(-90)')\n        .attr('x', 0)\n        .attr('y',\n          (yAxisOrientRight)\n            ? 10 - m.left\n            : -25 + m.right)\n        .attr('dy', '.9em')\n        .style('text-anchor', 'end')\n        .text(label);\n    }\n  }\n\n  createBarChart({ root, h, x, y }) {\n    const {\n      data,\n      mouseOverHandler,\n      mouseOutHandler,\n      mouseMoveHandler,\n      clickHandler,\n      colorBars,\n      xType,\n      barWidth\n    } = this.props;\n\n    const calculateDate = (v) => this.parseDate(v);\n    const calculateFill = (d, i) => this.defineColor(i, d, colorBars);\n\n    const calculateX = (d) => (\n      (xType === 'time')\n        ? x(calculateDate(d.x))\n        : x(d.x));\n    const calculateY = (d) => y(d.y);\n    const calculateW = () => (\n      (xType === 'text')\n        ? x.bandwidth()\n        : barWidth);\n    const calculateH = (d) => h - y(d.y);\n\n    const mouseover = (d) => mouseOverHandler(d, lastEvent);\n    const mouseout = (d) => mouseOutHandler(d, lastEvent);\n    const mousemove = (d) => mouseMoveHandler(d, lastEvent);\n    const click = (d) => clickHandler(d, lastEvent);\n\n    const group = root\n      .selectAll('rect') // '.bar'\n      .data(data);\n\n    group\n      .enter()\n      .append('rect')\n      .attr('class', 'bar')\n      .style('fill', calculateFill)\n      .attr('x', calculateX)\n      .attr('y', calculateY)\n      .attr('width', calculateW)\n      .attr('height', calculateH)\n      .on('mouseover', mouseover)\n      .on('mouseout', mouseout)\n      .on('mousemove', mousemove)\n      .on('click', click);\n\n    group\n      .exit()\n      .remove();\n  }\n\n  createLinePath({ root, h, x }) {\n    const {\n      lineData,\n      xType,\n      y2Type,\n      interpolate,\n      yDomainRange\n    } = this.props;\n\n    const parseDate = (v) => this.parseDate(v);\n\n    const y = this.createDomainRangeGenerator('y', yDomainRange, lineData, y2Type, h);\n\n    const yValue = createValueGenerator('y', y2Type, parseDate);\n    const xValue = createValueGenerator('x', xType, parseDate);\n\n    const linePath = line()\n      .curve(interpolateLine(interpolate))\n      .x((d) => x(xValue(d)))\n      .y((d) => y(yValue(d)));\n\n    root.append('path')\n      .datum(lineData)\n      .attr('class', 'line')\n      .attr('style', 'stroke: red')\n      .attr('d', linePath);\n  }\n\n  createStyle() {\n    const {\n      style,\n      yAxisOrientRight,\n      grid\n    } = this.props;\n\n    const uid = this.uid;\n    const scope = `.bar-chart-${uid}`;\n    const axisStyles = getAxisStyles(grid, false, yAxisOrientRight);\n    const rules = merge({}, defaultStyles, style, axisStyles);\n\n    return (\n      <Style\n        scopeSelector={scope}\n        rules={rules}\n      />\n    );\n  }\n\n  hasLineData() {\n    const {\n      lineData\n    } = this.props;\n\n    return (lineData.length > 0);\n  }\n\n  parseDate(v) {\n    const {\n      datePattern\n    } = this.props;\n\n    const datePatternParser = (\n      dateParser[datePattern] || (\n      dateParser[datePattern] = parse(datePattern)));\n\n    return datePatternParser(v);\n  }\n\n  calculateChartParameters() {\n    const {\n      data,\n      axes,\n      xType,\n      yType,\n      yAxisOrientRight,\n      xDomainRange,\n      yDomainRange,\n      margin,\n      width,\n      height\n    } = this.props;\n\n    const hasLineData = this.hasLineData();\n    const m = calculateMargin(axes, margin, yAxisOrientRight, hasLineData);\n    const w = reduce(width, m.left, m.right);\n    const h = reduce(height, m.top, m.bottom);\n    const x = this.createDomainRangeGenerator('x', xDomainRange, data, xType, w);\n    const y = this.createDomainRangeGenerator('y', yDomainRange, data, yType, h);\n\n    const node = this.createSvgNode({ m, w, h });\n    const root = this.createSvgRoot({ node, m });\n\n    return {\n      m,\n      w,\n      h,\n      x,\n      y,\n      node,\n      root\n    };\n  }\n\n  render() {\n    const {\n      axes\n    } = this.props;\n\n    const hasLineData = this.hasLineData();\n    const p = this.calculateChartParameters();\n\n    if (axes) {\n      this.createXAxis(p);\n\n      this.createYAxis(p); // const yAxis = this.createYAxis(p);\n\n      if (hasLineData) {\n        this.createYAxis2(p); // { ...p, yAxis });\n      }\n    }\n\n    this.createBarChart(p);\n\n    if (hasLineData) {\n      this.createLinePath(p);\n    }\n\n    const uid = this.uid;\n    const className = `bar-chart-${uid}`;\n    const {\n      node\n    } = p;\n\n    return (\n      <div ref=\"barChart\" className={className}>\n        {this.createStyle()}\n        {node.toReact()}\n      </div>\n    );\n  }\n}\n"]}